"use strict";$(".search_wrap").on("mouseover",function(){$(".opt_search").addClass("opt_search_hover"),$(".search_wrap>form").css({display:"block"})}).on("mouseout",function(){$(".opt_search").removeClass("opt_search_hover"),$(".search_wrap>form").css({display:"none"})}),$(".opt_wx").hover(function(){$(".wx_wrap").show()},function(){$(".wx_wrap").hide()}),$(".wx_wrap").hover(function(){$(".wx_wrap").show()},function(){$(".wx_wrap").hide()}),$(".opt_cart").hover(function(){$(".common_cart_wrap").show()},function(){$(".common_cart_wrap").hide()}),$(".common_cart_wrap").hover(function(){$(".common_cart_wrap").show()},function(){$(".common_cart_wrap").hide()}),$(".opt_user").hover(function(){$(".user_wrap").show()},function(){$(".user_wrap").hide()}),$(".user_wrap").hover(function(){$(".user_wrap").show()},function(){$(".user_wrap").hide()}),console.log($("cart_sum_choose .selectAll"));var cartList=JSON.parse(localStorage.getItem("cartList"));function bindHtml(){var t=cartList.every(function(t){return!0===t.isSelect});$("#check").attr("checked",t);var n="";cartList.forEach(function(t){n+='\n        <div class="item_detail">\n          <div class="item_sub">\n          <div class="cart_choose right">\n              <input type="checkbox" class="selectOne" data-id='.concat(t.id," ").concat(t.isSelect?"checked":"",'>\n          </div>\n          <div class="item_sub_detail">\n              <div class="cart_img">\n                  <img src="').concat(t.url,'">\n              </div>\n              <div class="cart_product">\n                  <div class="title-box">\n                      <a href="javascript:void(0)">\n                          ').concat(t.title,'</a>\n                  </div>\n                  <div class="service-opt service-opt__selected js_select_service">\n                      <i class="icon_services"></i>\n                      <span>选服务</span>\n                  </div>\n              </div>\n              <div class="cart_sku">\n                  <span class="sku_color">莫兰迪灰</span>\n                  <span class="sku_spec">十字446L</span>\n              </div>\n              <div class="cart_price">\n                  <span class="price_new">').concat(t.price,'</span>\n              </div>\n              \x3c!-- 加减 --\x3e\n              <div class="cart_num">\n                  \x3c!-- 下架或者删除或者换赠品--\x3e\n                  <div class="num_wrap num_wrap_inline  js_num">\n                      <span class="minus" data-id=').concat(t.id,'>-</span>\n                      <input class="num inp_bl" type="text" value="').concat(t.number,'">\n                      <span class="plus" data-id=').concat(t.id,'>+</span>\n                  </div>\n              </div>\n              \x3c!-- 小计 --\x3e\n              <div class="cart_total">\n                  ').concat(t.xiaoji,'\n              </div>\n              <div class="cart_operation">\n                  <span class="operation_delete js_item_delete" data-id=').concat(t.id,">删除</span>\n              </div>\n          </div>\n      </div>\n    </div>\n      ")}),$(".gwbox").html(n);var c=cartList.filter(function(t){return t.isSelect}),s=0,a=0;c.forEach(function(t){s+=t.number,a+=t.xiaoji}),n="",n+='\n    <div class="cart_sum_left">\n    <div class="cart_sum_choose dis">\n        <input type="checkbox" id="check" class="selectAll"><span>全选</span>\n    </div>\n</div>\n<div class="cart_sum_right">\n    <div class="cart_sum_num">\n        已选商品\n        <span class="color_f60 js_total_check">'.concat(s,'</span>款\n    </div>\n    <div class="cart_sum_price top">\n        <div class="total_price">\n            合计:\n            <span class="total_price_inner">¥').concat(a.toFixed(2),'</span>\n        </div>\n        <div class="cut_price">\n            (不含运费)\n        </div>\n    </div>\n    <div class="cart_sum_to_order js_to_order" ').concat(c.length?"":"disabled",">去结算</div>\n</div>\n    \n    "),$(".cart_bottom").html(n)}function bindEvent(){$(".btnsp").on("change",".selectAll",function(){var n=this;cartList.forEach(function(t){t.isSelect=n.checked}),bindHtml(),localStorage.setItem("cartList",JSON.stringify(cartList))}),$(".btnsp").on("change",".selectOne",function(){var n=$(this).data("id");cartList.forEach(function(t){t.id===n&&(t.isSelect=!t.isSelect)}),bindHtml(),localStorage.setItem("cartList",JSON.stringify(cartList))}),$(".btnsp").on("click",".minus",function(){var n=$(this).data("id");cartList.forEach(function(t){t.id===n&&(1<t.number&&t.number--,t.xiaoji=t.price*t.number)}),bindHtml(),localStorage.setItem("cartList",JSON.stringify(cartList))}),$(".btnsp").on("click",".plus",function(){var n=$(this).data("id");cartList.forEach(function(t){t.id===n&&(t.number++,t.xiaoji=t.number*t.price)}),bindHtml(),localStorage.setItem("cartList",JSON.stringify(cartList))}),$(".btnsp").on("click",".js_item_delete",function(){var c=$(this).data("id");console.log("把数组中 id 为 : "+c+" 的数去去掉, 从新渲染页面, 从新存储到 lcoalStorage");var s=[];cartList.forEach(function(t,n){t.id!=c&&s.push(t)}),bindHtml(),localStorage.setItem("cartList",JSON.stringify(s))})}cartList?(bindHtml(),bindEvent()):(alert("您的购物车为空, 快去选购把"),window.location.href="./list.html");